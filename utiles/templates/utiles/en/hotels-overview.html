{% extends "base/en/base.html" %}
{% load static %}

{% block title %}Room Details{% endblock title %}
{% block content %}

<div class="container d-flex justify-content-between align-items-center" id="nak__grid-2">
    <a href="/" class="d-flex justify-content-start align-items-center nav-link mt-4"
        style="display: inline-block; padding-left: 8px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left"
            viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
        </svg>
        <span class="ms-2" style="font-weight: bold; font-size: 1rem;">Retour</span>
    </a>
    <div class="mt-3">
        
        <button class="nk-like rounded-pill p-0 d-flex-justify-content-center align-items-center me-4" style="height: 40px; width: 40px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-heart cu-heart" viewBox="0 0 16 16">
            <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/>
          </svg></button>
        <button id="nak-share" class="nk-share rounded-pill p-0 d-flex-justify-content-center align-items-center" style="height: 40px; width: 40px;"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="20" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">
            <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5m-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/>
          </svg></button>
    </div>
</div>
<section class="container" style="margin-bottom: 80px; margin-top: 50px;">
    <div id="image-container" class="row mb-3"></div>

    <div class="row mb-3">
        <div class="col-lg-8  p-2">
            <div class="d-flex align-items-center border p-3">
                <div class="mb-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor"
                        class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6" />
                    </svg>
                </div>
                <div class="ms-3">
                    <p class="mb-1" id="a__1"></p>
                    <p class="mb-1" id="a__2"></p>
                </div>
            </div>
            <div class="mt-3 w-100 border p-4">
                <h4>Room Amenities</h4>
                <ul  id="amenities" class="d-flex justify-content-start flex-wrap ps-0" style="list-style: none;"></ul>
            </div>
            <div class="mt-5 mb-5">
                <div class="mb-5">
                    <div class="mb-4">
                        <h2>Nos chambres</h2>
                    </div>
                    <div class="row row-cols-1 row-cols-md-3 g-3" id="grid__items2"></div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 p-2">
            <div class="d-flex align-items-center justify-content-between border p-3 mb-3">
                <div class="text-center">
                    <p class="mb-1" id="av_rating"></p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        </span>
                        <span class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        </span>
                        <span class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        </span>
                        <span class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        </span>
                        <span class="me-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-star-fill" viewBox="0 0 16 16">
                                <path
                                    d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z" />
                            </svg>
                        </span>

                    </div>
                </div>
                <div class="text-center mt-1">
                    <p class="mb-1">0</p>
                    <p class="mb-0"> Avis clients</p>
                </div>
                <div class="text-center mt-1">
                    <p class="mb-1"> 0</p>
                    <p class="mb-0"> Visiteurs</p>
                </div>
            </div>
            <div class="card mb-3 p-2">
                <h6 class="card-title">Add more nights</h6>
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                      <button class="btn btn-primary rounded-3 p-0 d-flex align-items-center justify-content-center" id="de_nig" style="width: 35px; height: 35px;">
                          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-dash" viewBox="0 0 16 16">
                              <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"/>
                            </svg>
                        </button>
                      <span class="bg-light border d-flex align-items-center justify-content-center rounded-4" style="width: 35px; height: 35px; font-weight: bold;" id="selected__nights">1</span>
                        <button class="btn btn-primary rounded-3 p-0 d-flex align-items-center justify-content-center" id="in_nig" style="width: 35px; height: 35px;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                              </svg>
                        </button>
                  </div>
                </div>
              </div>
            <div id="price__grid">
                <div class="border p-4 rounded-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <div class="mb-2 d-flex align-items-center justify-content-between w-100">
                            <h6><span id="room_prs"></span> / night</h6>

                            <div class="mb-2">
                               <p class="mb-0">Selected nights <b id="per_night__quan">Today</b></p>
                            </div>
                        </div>

                        <div class="mb-2">
                            <div class="d-flex align-items-center"  id="av_rating_b"></div>
                        </div>
                    </div>
                    <div class="border rounded-4">
                     
                        <div class="d-flex justify-content-between align-items-center" id="date_updater">
                            <div class="p-3">
                                <p class="mb-0" style="font-size: 0.8rem;">DATE FROM</p>
                                <p class="mb-0" id="date_from" style="font-size: 0.8rem;">9/27/2024</p>
                            </div>
                            
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-6">
                            <button class=" w-100 mt-3 btn-rev-nak" id="add-to__reserve">Reserve</button>
                        </div>
                        <div class="col-lg-6">
                            <button class=" w-100 mt-3 btn-rev-nak" style="font-size: 14px;" id="add-to__chk"><span class="me-2 mb-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart2" viewBox="0 0 16 16">
                                <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l1.25 5h8.22l1.25-5zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
                              </svg></span> <span>Add to Checkout</span></button>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-1 mt-3">
                        <div class="mb-0">
                            <h6 style="text-decoration: underline;">1 room for 2 persons</h6>
                        </div>

                        <div class="mb-0">
                            <p class="mb-0" id="subtotal"></p>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-1 mt-2">
                        <div class="mb-0">
                            <h6 style="text-decoration: underline;">Reductions</h6>
                        </div>

                        <div class="mb-0">
                            <p class="mb-0">-0.00</p>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-4 mt-2">
                        <div class="mb-0">
                            <h6 style="text-decoration: underline;">Autres frais</h6>
                        </div>

                        <div class="mb-0">
                            <p class="mb-0">0.00</p>
                        </div>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between align-items-center mb-2 mt-2">
                        <div class="mb-0">
                            <h5>Total a Payer</h5>
                        </div>

                        <div class="mb-0">
                            <h5 id="g__total"></h5>
                        </div>
                    </div>


                </div>
            </div>

            
        </div>
    </div>
</section>


<section class="container">
    <h2 class="mb-4"> Avis des nos clients</h2>
    <div class="row" id="review__container">
        <div class="col-lg-4 mb-2">
            <div class="d-flex justify-content-between align-item-center">
                <div id="review__grid_inn_1"></div>
                <div id="review__grid_inn_2"></div>
            </div>
        </div>
        <div class="col-lg-8" id="review__grid_2"></div>
    </div>
</section>

{% endblock content %}

{% block script %}
document.addEventListener("DOMContentLoaded", () => {
    const LanguageManager = (function () {
    const DEFAULT_LANGUAGE = 'en';

    function getLanguage() {
        return localStorage.getItem('lang') || DEFAULT_LANGUAGE;
    }

    function setLanguage(lang) {
        localStorage.setItem('lang', lang);
    }

    return {
        getLanguage,
        setLanguage
    };
})();
    const shareButton = document.getElementById('nak-share');

    shareButton.addEventListener('click', async (event) => {
        event.preventDefault();

        // Extract the data-id (room ID) from the button
        const roomId = event.currentTarget.getAttribute('data-id');

        try {
            // Fetch the shareable link from the Django API
            const response = await fetch(`/posts/shareable-link/${roomId}/`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',

                }
            });

            if (response.ok) {
                const data = await response.json();
                const shareableLink = data.shareable_link;

                // Use Clipboard API to copy the link to clipboard
                await navigator.clipboard.writeText(shareableLink);

                // Show success notification
                butterup.toast({
                    title: 'Link Copied!',
                    message: "The link has been copied to your clipboard.",
                    type: 'success',
                });
            } else {
                throw new Error('Failed to generate the link');
            }
        } catch (err) {
            // Handle errors gracefully and notify the user
            butterup.toast({
                title: 'Error',
                message: "There was an error generating the shareable link. Please try again.",
                type: 'error',
            });
        }
    });
});
document.addEventListener('DOMContentLoaded', () => {
    // Cache DOM elements to avoid repeated lookups
    const inNightsButton = document.getElementById('in_nig');
    const deNightsButton = document.getElementById('de_nig');
    const selectedNightsElement = document.getElementById('selected__nights');
    const perNightQuantity = document.getElementById('per_night__quan');
    const dateUpdater = document.getElementById('date_updater');
    const dateFromElement = document.getElementById('date_from');
    const subTotal = document.getElementById('subtotal');
    const grandTotal = document.getElementById('g__total');
    const addToCartButton = document.getElementById('add-to__chk');

    let selection = 1;
    let pricePerNight = 0;
    let isFetchingPrice = false;

    // Helper function to format a date as mm/dd/yyyy
    function formatDate(date) {
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const year = date.getFullYear();
        return `${month}/${day}/${year}`;
    }

    // Set the current client-side date in the "DATE FROM" element
    const currentDate = new Date();
    const formattedCurrentDate = formatDate(currentDate);
    dateFromElement.textContent = formattedCurrentDate;

    // Base64 encoding function
    function encodeBase64(data) {
        console.log(data)
        console.log(btoa(JSON.stringify(data)))
        return btoa(JSON.stringify(data));
    }

    // Base64 decoding function
    function decodeBase64(encodedData) {
        console.log(encodedData)
        try {
            // Check if encodedData looks like a base64 string
            if (!/^[A-Za-z0-9+/=]+$/.test(encodedData)) {
                throw new Error("Data is not in valid base64 format.");
            }
            return JSON.parse(atob(encodedData)); // Decode and parse JSON
        } catch (error) {
            console.error("Error decoding base64 data:", error);
            return []; // Return empty array on failure
        }
    }
    // Check for element existence before attaching event listeners
    if (inNightsButton && deNightsButton && selectedNightsElement && dateFromElement) {
        inNightsButton.addEventListener('click', (event) => handleNightChange(1, event));
        deNightsButton.addEventListener('click', (event) => handleNightChange(-1, event));
    }

    // Function to handle night increases or decreases
    function handleNightChange(change, event) {
        const newSelection = selection + change;
        if (newSelection < 1) return;  // Prevent negative nights

        selection = newSelection;
        updateNights(selection, event);
    }

    // Function to update UI and calculate prices
    async function updateNights(newSelection, event) {
        selectedNightsElement.textContent = newSelection;
        perNightQuantity.textContent = newSelection === 1 ? 'Today' : newSelection;

        const dateFrom = new Date(dateFromElement.textContent);
        const dateTill = newSelection === 1 ? dateFrom : new Date(dateFrom.setDate(dateFrom.getDate() + newSelection - 1));

        updateDateTill(dateTill, newSelection);

        if (newSelection > 0) {
            await priceCal(newSelection, event);
        } else {
            subTotal.textContent = '0$';
            grandTotal.textContent = '0$';
        }
    }

    // Function to update or create the "DATE TILL" section
    function updateDateTill(dateTill, sel) {
        const formattedDateTill = formatDate(dateTill);

        let dateTillElement = document.getElementById('date_till');
        let arrowDiv = document.querySelector('.bi-arrow-right');

        if (sel === 1) {
            if (dateTillElement) dateTillElement.style.display = 'none';
            if (arrowDiv) arrowDiv.style.display = 'none';
        } else {
            if (!dateTillElement) {
                dateTillElement = document.createElement('div');
                dateTillElement.id = 'date_till';
                dateTillElement.classList.add('p-3');
                dateTillElement.innerHTML = `
                    <p class="mb-0" style="font-size: 0.8rem;">DATE TILL</p>
                    <p class="mb-0" id="date_till_text" style="font-size: 0.8rem;">${formattedDateTill}</p>`;

                arrowDiv = document.createElement('div');
                arrowDiv.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
                    </svg>`;

                const dateTillContainer = document.createElement('div');
                dateTillContainer.classList.add('d-flex', 'align-items-center');
                dateTillContainer.appendChild(arrowDiv);
                dateTillContainer.appendChild(dateTillElement);

                dateUpdater.appendChild(dateTillContainer);
            } else {
                document.getElementById('date_till_text').textContent = formattedDateTill;
                dateTillElement.style.display = 'block';
                if (arrowDiv) arrowDiv.style.display = 'block';
            }
        }
    }

    // Function for price calculation logic
    async function priceCal(selection, event) {
        if (isFetchingPrice) return;
        isFetchingPrice = true;

        try {
            const roomId = event ? event.currentTarget.getAttribute('data-id') : null;
            if (roomId) {
                const response = await fetch(`/posts/price?ex_room_id=${roomId}`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                    },
                });

                if (!response.ok) throw new Error('Failed to fetch hotel details');

                const data = await response.json();
                pricePerNight = data.price || 0;
                const subtotalValue = pricePerNight * selection;

                subTotal.textContent = `${subtotalValue}$`;
                grandTotal.textContent = `${subtotalValue}$`;

                const savedData = {
                    room_id: roomId,
                    price: pricePerNight,
                    nights: selection,
                    'type': 'bed',
                };
                const encodedData = encodeBase64(savedData);
                sessionStorage.setItem('nk-cache-save', encodedData);
            }
        } catch (error) {
            console.error('Price calculation error:', error);
        } finally {
            isFetchingPrice = false;
        }
    }
    async function singleCartCal(selection, event) {
        if (isFetchingPrice) return;  // Prevent multiple requests at once
        isFetchingPrice = true;

        try {
            const roomId = event?.currentTarget.getAttribute('data-id');  // Safer optional chaining

            if (roomId) {
                // Fetching existing cart from localStorage
                let existingCart = localStorage.getItem('nk-pmt-data');
                existingCart = existingCart ? decodeBase64(existingCart) : [];

                const roomExists = existingCart.some(item => item.room_id === roomId);

                if (!roomExists) {
                    // Fetch price if room doesn't exist in the cart
                    const response = await fetch(`/posts/price?ex_room_id=${roomId}`, {
                        method: 'GET',
                        headers: { 'Accept': 'application/json' },
                    });

                    if (!response.ok) throw new Error('Failed to fetch hotel details');

                    const data = await response.json();
                    const pricePerNight = data.price || 0;

                    // Add room to cart
                    const savedData = {
                        room_id: roomId,
                        price: pricePerNight,
                        nights: selection,
                        type: 'bed',
                    };

                    existingCart.push(savedData);

                    // Save updated cart to localStorage
                    localStorage.setItem('nk-pmt-data', encodeBase64(existingCart));
                    return true
                }
            }
        } catch (error) {
            return false
        } finally {
            isFetchingPrice = false;
        }
    }

    // Base64 encoding function
    function encodeBase64(data) {
        return btoa(JSON.stringify(data));
    }

    // Base64 decoding function
    function decodeBase64(encodedData) {
        try {
            // Check if encodedData looks like a base64 string
            if (!/^[A-Za-z0-9+/=]+$/.test(encodedData)) {
                throw new Error("Data is not in valid base64 format.");
            }
            return JSON.parse(atob(encodedData)); // Decode and parse JSON
        } catch (error) {
            console.error("Error decoding base64 data:", error);
            return []; // Return empty array on failure
        }
    }
    
    addToCartButton.addEventListener('click', (event) => {
        const tempDataGet = sessionStorage.getItem('nk-cache-save');
        // console.log("here my existing: " ,tempDataGet)
        if (tempDataGet) {
            const roomData = decodeBase64(tempDataGet); // Decoding sessionStorage data
            
    
            // Retrieve existing cart data from localStorage, decode it if it exists
            let existingCart = localStorage.getItem('nk-pmt-data');
            existingCart = existingCart ? decodeBase64(existingCart) : [];
    
            // Find the room in the cart by room_id
            const roomIndex = existingCart.findIndex(item => item.room_id === roomData.room_id);
    
            if (roomIndex !== -1) {
                // Room exists, update its data (nights and price)
                existingCart[roomIndex].nights = roomData.nights;
                existingCart[roomIndex].price = roomData.price;
    
                // Show a toast message that the cart has been updated
                butterup.toast({
                    title: 'Cart Updated Successfully',
                    message: 'The selected room in your cart has been updated with new nights and price.',
                    type: 'info',
                });
    
            } else {
                // Room does not exist, add it to the cart
                existingCart.push(roomData);
    
                // Show a toast message that the room has been added
                butterup.toast({
                    title: 'Room Added to Cart',
                    message: 'The selected room has been successfully added to your cart.',
                    type: 'success',
                });
            }
    
            // Encode the updated cart data before saving to localStorage
            const encodedCartData = encodeBase64(existingCart);
            localStorage.setItem('nk-pmt-data', encodedCartData);
    
            // Secure redirect after 2 seconds
            setTimeout(() => {
                window.location.href = `/nakiese/${LanguageManager.getLanguage()}/cart`;
            }, 2000); // 2000 milliseconds = 2 seconds
    
        } else {
            let added = singleCartCal(selection, event);
            if (added) {
                butterup.toast({
                    title: 'Room Added to Cart',
                    message: 'The selected room has been successfully added to your cart.',
                    type: 'success',
                });
                // Secure redirect after 2 seconds
                setTimeout(() => {
                    window.location.href = `/nakiese/${LanguageManager.getLanguage()}/cart`;
                }, 2000); // 2000 milliseconds = 2 seconds
            } else {
                butterup.toast({
                    title: 'Something went wrong!',
                    message: 'Please try again later.',
                    type: 'error',
                });
            }
        }
    });
    
    let addTReserve = document.getElementById('add-to__reserve');
    addTReserve.addEventListener('click', (event)=>{
        const roomId = event?.currentTarget.getAttribute('data-id'); 
        if (roomId) {
            setTimeout(() => {
                window.location.href = `/nakiese/${LanguageManager.getLanguage()}/payment?key=${roomId}&type=bed`;
            }, 1000);
        }
    });
});

{% endblock script %}
